# istiod-values.yaml
# Istio control plane configuration for AI sandbox with mTLS
#
# Tom Dean
# Last edit: 2/23/2026

meshConfig:
  accessLogFile: /dev/stdout
  defaultConfig:
    proxyMetadata:
      ISTIO_META_DNS_AUTO_ALLOCATE: "true"
      ISTIO_META_DNS_CAPTURE: "true"

env:
  PILOT_ENABLE_IP_AUTOALLOCATE: "true"
  PILOT_ENABLE_K8S_SELECT_WORKLOAD_ENTRIES: "false"
  PILOT_SKIP_VALIDATE_TRUST_DOMAIN: "true"

pilot:
  cni:
    namespace: istio-system
    enabled: true

# Enable mTLS globally for secure service-to-service communication
global:
  mtls:
    enabled: true
  proxy:
    clusterDomain: cluster.local
